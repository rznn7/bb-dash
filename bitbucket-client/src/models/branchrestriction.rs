/*
 * Bitbucket API
 *
 * Code against the Bitbucket API to automate simple tasks, embed Bitbucket data into your own site, build mobile or desktop apps, or even add custom UI add-ons into Bitbucket itself using the Connect framework.
 *
 * The version of the OpenAPI document: 2.0
 * Contact: support@bitbucket.org
 * Generated by: https://openapi-generator.tech
 */

use crate::models;
use serde::{Deserialize, Serialize};

#[derive(Clone, Default, Debug, PartialEq, Serialize, Deserialize)]
pub struct Branchrestriction {
    #[serde(rename = "type")]
    pub r#type: String,
    #[serde(rename = "links", skip_serializing_if = "Option::is_none")]
    pub links: Option<serde_json::Value>,
    /// The branch restriction status' id.
    #[serde(rename = "id", skip_serializing_if = "Option::is_none")]
    pub id: Option<i32>,
    /// The type of restriction that is being applied.
    #[serde(rename = "kind")]
    pub kind: Kind,
    /// Indicates how the restriction is matched against a branch. The default is `glob`.
    #[serde(rename = "branch_match_kind")]
    pub branch_match_kind: BranchMatchKind,
    /// Apply the restriction to branches of this type. Active when `branch_match_kind` is `branching_model`. The branch type will be calculated using the branching model configured for the repository.
    #[serde(rename = "branch_type", skip_serializing_if = "Option::is_none")]
    pub branch_type: Option<BranchType>,
    /// Apply the restriction to branches that match this pattern. Active when `branch_match_kind` is `glob`. Will be empty when `branch_match_kind` is `branching_model`.
    #[serde(rename = "pattern")]
    pub pattern: String,
    /// Value with kind-specific semantics:  * `require_approvals_to_merge` uses it to require a minimum number of approvals on a PR.  * `require_default_reviewer_approvals_to_merge` uses it to require a minimum number of approvals from default reviewers on a PR.  * `require_passing_builds_to_merge` uses it to require a minimum number of passing builds.  * `require_commits_behind` uses it to require the current branch is up to a maximum number of commits behind it destination.
    #[serde(rename = "value", skip_serializing_if = "Option::is_none")]
    pub value: Option<i32>,
    #[serde(rename = "users", skip_serializing_if = "Option::is_none")]
    pub users: Option<Vec<models::Account>>,
    #[serde(rename = "groups", skip_serializing_if = "Option::is_none")]
    pub groups: Option<Vec<models::Group>>,
}

impl Branchrestriction {
    pub fn new(r#type: String, kind: Kind, branch_match_kind: BranchMatchKind, pattern: String) -> Branchrestriction {
        Branchrestriction {
            r#type,
            links: None,
            id: None,
            kind,
            branch_match_kind,
            branch_type: None,
            pattern,
            value: None,
            users: None,
            groups: None,
        }
    }
}
/// The type of restriction that is being applied.
#[derive(Clone, Copy, Debug, Eq, PartialEq, Ord, PartialOrd, Hash, Serialize, Deserialize)]
pub enum Kind {
    #[serde(rename = "push")]
    Push,
    #[serde(rename = "delete")]
    Delete,
    #[serde(rename = "force")]
    Force,
    #[serde(rename = "restrict_merges")]
    RestrictMerges,
    #[serde(rename = "require_tasks_to_be_completed")]
    RequireTasksToBeCompleted,
    #[serde(rename = "require_approvals_to_merge")]
    RequireApprovalsToMerge,
    #[serde(rename = "require_review_group_approvals_to_merge")]
    RequireReviewGroupApprovalsToMerge,
    #[serde(rename = "require_default_reviewer_approvals_to_merge")]
    RequireDefaultReviewerApprovalsToMerge,
    #[serde(rename = "require_no_changes_requested")]
    RequireNoChangesRequested,
    #[serde(rename = "require_passing_builds_to_merge")]
    RequirePassingBuildsToMerge,
    #[serde(rename = "require_commits_behind")]
    RequireCommitsBehind,
    #[serde(rename = "reset_pullrequest_approvals_on_change")]
    ResetPullrequestApprovalsOnChange,
    #[serde(rename = "smart_reset_pullrequest_approvals")]
    SmartResetPullrequestApprovals,
    #[serde(rename = "reset_pullrequest_changes_requested_on_change")]
    ResetPullrequestChangesRequestedOnChange,
    #[serde(rename = "require_all_dependencies_merged")]
    RequireAllDependenciesMerged,
    #[serde(rename = "enforce_merge_checks")]
    EnforceMergeChecks,
    #[serde(rename = "allow_auto_merge_when_builds_pass")]
    AllowAutoMergeWhenBuildsPass,
    #[serde(rename = "require_all_comments_resolved")]
    RequireAllCommentsResolved,
}

impl Default for Kind {
    fn default() -> Kind {
        Self::Push
    }
}
/// Indicates how the restriction is matched against a branch. The default is `glob`.
#[derive(Clone, Copy, Debug, Eq, PartialEq, Ord, PartialOrd, Hash, Serialize, Deserialize)]
pub enum BranchMatchKind {
    #[serde(rename = "branching_model")]
    BranchingModel,
    #[serde(rename = "glob")]
    Glob,
}

impl Default for BranchMatchKind {
    fn default() -> BranchMatchKind {
        Self::BranchingModel
    }
}
/// Apply the restriction to branches of this type. Active when `branch_match_kind` is `branching_model`. The branch type will be calculated using the branching model configured for the repository.
#[derive(Clone, Copy, Debug, Eq, PartialEq, Ord, PartialOrd, Hash, Serialize, Deserialize)]
pub enum BranchType {
    #[serde(rename = "feature")]
    Feature,
    #[serde(rename = "bugfix")]
    Bugfix,
    #[serde(rename = "release")]
    Release,
    #[serde(rename = "hotfix")]
    Hotfix,
    #[serde(rename = "development")]
    Development,
    #[serde(rename = "production")]
    Production,
}

impl Default for BranchType {
    fn default() -> BranchType {
        Self::Feature
    }
}

